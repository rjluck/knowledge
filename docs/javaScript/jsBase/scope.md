# 作用域

[[toc]]

## 定义

通常来说，一段程序代码中所用到的名字并不总是有效和可用的，而限定这个名字的**可用性的代码范围**就是这个名字的**作用域**。作用域的使用提高了程序逻辑的局部性，增强了程序的可靠性，减少了名字冲突。



### 全局作用域

整个`script`标签 或者是一个单独的`js`文件
```js
var num = 10;
```

### 局部作用域(函数作用域)

在函数内部就是局部作用域

```js
function fn(){

}
```


## 变量的作用域

### 变量作用域的分类

在`javaScript`中,根据作用域的不同,变量可以分为两种：

- 全局变量

在全局作用域下的变量

> 注意：如果在函数内部，没有声明直接赋值的变量也属于全局变量

- 局部变量

在局部作用域下的变量，即在函数内部的变量

> 函数的形参也可以看做局部变量

```js
function fun(){
    var num = 10;
    num1 = 20;
}
fun()
console.log(num);//num not undefined
console.log(num1);//20
```

**从执行效率来看全局变量和局部变量**

- 全局变量，在任何地方都可以使用，只有浏览器关闭的时候才会销毁，比较占内存资源
- 局部变量，只在函数内部使用，当我们程序执行完毕就会销毁，比较节约内存资源

**块级作用域 {}**

`js` 在`es5`阶段没有块级作用域，是在`es6`的时候新增的。

```js
if(3<5){
    var num = 10;
}
console.log(num);//10
```


## 作用域链(就近原则)

- 只要是代码，就至少有一个作用域
- 写在函数内部的局部作用域
- 如果函数中还有函数，那么在这个作用域中就又可以诞生一个作用域
- 根据在内部函数可以访问外部函数变量的这种机制，用链式查找决定哪些数据能被内部函数访问，就称作**作用域链**


```js
var num = 10;
function fn(){ //外部函数
    var num = 20;
    function fun(){ //内部函数
        console.log(num);//20
    }
    fun();
}
fn();
```
